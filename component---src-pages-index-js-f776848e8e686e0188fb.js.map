{"version":3,"sources":["webpack:///./src/icons/audio_ptr_blue.svg","webpack:///./src/components/MapLayout.js","webpack:///./src/pages/index.js","webpack:///./node_modules/classnames/index.js","webpack:///./src/styles/components/mapLayout.module.scss","webpack:///./src/icons/text_ptr_blue.svg"],"names":["module","exports","mapSettings","center","zoom","minZoom","MapLayout","props","state","activePark","console","log","componentDidMount","this","handleLoad","window","addEventListener","forceUpdate","componentDidUpdate","componentWillUnmount","removeEventListener","L","require","icons","Text","Icon","iconUrl","textIcon","iconSize","Audio","audioIcon","render","className","mapLayout","map_layout","overlay","children","cn","map","figure_disabled","mapDisabled","settings","data","features","park","type","key","properties","PARK_ID","icon","undefined","position","geometry","coordinates","onClick","setState","onClose","NAME","DESCRIPTION","React","Component","MapPage","hasOwn","hasOwnProperty","classNames","classes","i","arguments","length","arg","argType","push","Array","isArray","inner","apply","call","join","default"],"mappings":"8EAAAA,EAAOC,QAAU,kuB,yNCUXC,EAAc,CAClBC,OAAQ,CAAC,SAAU,OACnBC,KAAM,GACNC,QAAS,IAGLC,E,YACJ,WAAYC,GAAQ,IAAD,SACjB,cAAMA,IAAN,MAIKC,MAAQ,CAAEC,WAAY,MAC3BC,QAAQC,IAAI,QANK,E,4CASnBC,kBAAA,WACEF,QAAQC,IAAI,SACZE,KAAKC,aACLC,OAAOC,iBAAiB,OAAQH,KAAKC,YACrCD,KAAKI,e,EAGPC,mBAAA,WACER,QAAQC,IAAI,UACZE,KAAKC,aACLC,OAAOC,iBAAiB,OAAQH,KAAKC,a,EAGvCK,qBAAA,WACET,QAAQC,IAAI,WACZI,OAAOK,oBAAoB,OAAQP,KAAKC,a,EAG1CA,WAAA,WACE,IAAMO,EAAIC,EAAQ,QAClBZ,QAAQC,IAAI,IAAIU,GACXR,KAAKU,OAA2B,oBAAXR,SACxBF,KAAKU,MAAQ,CACXC,KAAM,IAAIH,EAAEI,KAAK,CACfC,QAASC,IACTC,SAAU,CAAC,GAAI,MAEjBC,MAAO,IAAIR,EAAEI,KAAK,CAChBC,QAASI,IACTF,SAAU,CAAC,GAAI,S,EAOvBG,OAAA,WAAU,IAAD,SACDxB,EAAQM,KAAKN,MAEnB,OACE,kBAAC,IAAYA,EACb,yBAAKyB,UAAWC,IAAUC,YAC1B,yBAAKF,UAAWC,IAAUE,SACzB5B,EAAM6B,UAGP,yBAAKJ,UAAWK,IAAGJ,IAAUK,KAAX,OAAkBL,IAAUM,iBAAkBhC,EAAMiC,YAApD,KAClB,kBAAC,IAAD,CAAKC,SAAUvC,GACdwC,EAAKC,SAASL,KAAI,SAAAM,GACT,OAAI,EAAKrB,OAAS,EAAKA,MAAMqB,EAAKC,MACxB,kBAAC,IAAD,CACEC,IAAKF,EAAKG,WAAWC,QACrBC,KAAM,EAAK1B,MAAMqB,EAAKC,YAAOK,EAC7BC,SAAU,CACRP,EAAKQ,SAASC,YAAY,GAC1BT,EAAKQ,SAASC,YAAY,IAE5BC,QAAS,WACP,EAAKC,SAAS,CAAC9C,WAAYmC,QAMvClC,QAAQC,IAAI,aACJ,kBAAC,IAAD,CACEmC,IAAKF,EAAKG,WAAWC,QACrBG,SAAU,CACRP,EAAKQ,SAASC,YAAY,GAC1BT,EAAKQ,SAASC,YAAY,IAE5BC,QAAS,WACP5C,QAAQC,IAAI,UAAWiC,GACvB,EAAKW,SAAS,CAAC9C,WAAYmC,WAK1C/B,KAAKL,MAAMC,YACV,kBAAC,IAAD,CACE0C,SAAU,CACRtC,KAAKL,MAAMC,WAAW2C,SAASC,YAAY,GAAG,KAC9CxC,KAAKL,MAAMC,WAAW2C,SAASC,YAAY,IAE7CG,QAAS,WACP,EAAKD,SAAS,CAAC9C,WAAW,SAG5B,6BACE,4BAAKI,KAAKL,MAAMC,WAAWsC,WAAWU,MACtC,2BAAI5C,KAAKL,MAAMC,WAAWsC,WAAWW,oB,GApGjCC,IAAMC,WAgHftD,O,kCChIf,wDAmCeuD,UA/BC,WACd,OACE,kBAAC,IAAD,KACE,yBAAK7B,UAAU,WAAf,IAA0B,4BAAO,4BAAO,4BAAO,4BAAO,4BAAO,uC,qBCPnE,OAOA,WACE,aAEA,IAAI8B,EAAS,GAAGC,eAEhB,SAASC,IAGP,IAFA,IAAIC,EAAU,GAELC,EAAI,EAAGA,EAAIC,UAAUC,OAAQF,IAAK,CACzC,IAAIG,EAAMF,UAAUD,GACpB,GAAKG,EAAL,CACA,IAAIC,SAAiBD,EAErB,GAAgB,WAAZC,GAAoC,WAAZA,EAC1BL,EAAQM,KAAKF,QACR,GAAIG,MAAMC,QAAQJ,IAAQA,EAAID,OAAQ,CAC3C,IAAIM,EAAQV,EAAWW,MAAM,KAAMN,GAE/BK,GACFT,EAAQM,KAAKG,QAEV,GAAgB,WAAZJ,EACT,IAAK,IAAIxB,KAAOuB,EACVP,EAAOc,KAAKP,EAAKvB,IAAQuB,EAAIvB,IAC/BmB,EAAQM,KAAKzB,IAMrB,OAAOmB,EAAQY,KAAK,KAGe7E,EAAOC,SAC1C+D,EAAWc,QAAUd,EACrBhE,EAAOC,QAAU+D,QAKhB,KAFwB,EAAF,WACrB,OAAOA,GACR,QAFoB,OAEpB,aAxCL,I,uBCNAhE,EAAOC,QAAU,CAAC,WAAa,sCAAsC,QAAU,mCAAmC,IAAM,+BAA+B,aAAe,0C,mBCDtKD,EAAOC,QAAU","file":"component---src-pages-index-js-f776848e8e686e0188fb.js","sourcesContent":["module.exports = \"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAyOC44OSAzNC44OCI+PGRlZnM+PHN0eWxlPi5jbHMtMXtmaWxsOiMzYzAwY2U7fTwvc3R5bGU+PC9kZWZzPjx0aXRsZT5BdWRpbyBwb2ludGVyIGJsdWVBc3NldCAxODwvdGl0bGU+PGcgaWQ9IkxheWVyXzIiIGRhdGEtbmFtZT0iTGF5ZXIgMiI+PGcgaWQ9ImZyb250X2ludGVyZmFjZSIgZGF0YS1uYW1lPSJmcm9udCBpbnRlcmZhY2UiPjxwYXRoIGNsYXNzPSJjbHMtMSIgZD0iTTI0LjY2LDQuMjNBMTQuNDUsMTQuNDUsMCwwLDAsNC4yMywyNC42NkwxNC40NCwzNC44OCwyNC42NiwyNC42NkExNC40NSwxNC40NSwwLDAsMCwyNC42Niw0LjIzWm0tMy41OCw2LjVMMTYuMTksNy44NWwuMzMsMTEuMjVjMCwxLjc5LTIuMjEsMy43Mi00LjUzLDMuNzJTNy44LDIxLjM2LDcuOCwxOS41N3MxLjQ2LTMuMjEsMy43Ny0zLjIxQTUuNTcsNS41NywwLDAsMSwxNS41LDE3LjhMMTUuMzEsNy42MVY0LjU2bDUuNzcsMy4yNVoiLz48L2c+PC9nPjwvc3ZnPg==\"","import React from 'react';\nimport Layout from \"../components/Layout\";\nimport mapLayout from \"../styles/components/mapLayout.module.scss\";\nimport Map from '../components/Map';\nimport { Marker, Popup } from \"react-leaflet\";\nimport data from \"../data.json\";\nimport textIcon from \"../icons/text_ptr_blue.svg\";\nimport audioIcon from \"../icons/audio_ptr_blue.svg\";\nimport cn from 'classnames';\n\nconst mapSettings = {\n  center: [51.7522, -1.2560],\n  zoom: 12,\n  minZoom: 12,\n};\n\nclass MapLayout extends React.Component {\n  constructor(props) {\n    super(props);\n    //this.handleLoad = this.handleLoad.bind(this);\n    // Init custom map icon\n    //this.icons = {};\n    this.state = { activePark: null };\n    console.log(\"init\");\n  }\n  \n  componentDidMount() {\n    console.log(\"mount\");\n    this.handleLoad();\n    window.addEventListener('load', this.handleLoad);\n    this.forceUpdate();\n  }\n  \n  componentDidUpdate() {\n    console.log(\"update\");\n    this.handleLoad();\n    window.addEventListener('load', this.handleLoad);\n  }\n  \n  componentWillUnmount() {\n    console.log(\"unmount\");\n    window.removeEventListener('load', this.handleLoad)  \n  }\n  \n  handleLoad() {\n    const L = require(\"leaflet\");\n    console.log(\"L\",L);\n    if (!this.icons && typeof window !== 'undefined') {\n      this.icons = {\n        Text: new L.Icon({\n          iconUrl: textIcon,\n          iconSize: [32, 32]\n        }),\n        Audio: new L.Icon({\n          iconUrl: audioIcon,\n          iconSize: [64, 64]\n        }),\n      };\n    }\n    \n  }\n  \n  render() {\n    const props = this.props;\n    \n    return (\n      <Layout { ...props } >\n      <div className={mapLayout.map_layout}>\n      <div className={mapLayout.overlay}>\n      {props.children}\n      </div>\n      \n      <div className={cn(mapLayout.map, {[mapLayout.figure_disabled]: props.mapDisabled})}>\n      <Map settings={mapSettings}>\n      {data.features.map(park => {\n                if (this.icons && this.icons[park.type]) {\n                  return (<Marker\n                            key={park.properties.PARK_ID}\n                            icon={this.icons[park.type]||undefined}\n                            position={[\n                              park.geometry.coordinates[0],\n                              park.geometry.coordinates[1]\n                            ]}\n                            onClick={() => {\n                              this.setState({activePark: park});\n                            }}\n                  />);\n                  \n                }\n                else {\n                  console.log(\"no marker\");\n                  return (<Marker\n                            key={park.properties.PARK_ID}\n                            position={[\n                              park.geometry.coordinates[0],\n                              park.geometry.coordinates[1]\n                            ]}\n                            onClick={() => {\n                              console.log(\"click 2\", park);\n                              this.setState({activePark: park});\n                            }}\n                  />)\n                };\n              })}\n              {this.state.activePark && (\n                <Popup\n                  position={[\n                    this.state.activePark.geometry.coordinates[0]+0.005,\n                    this.state.activePark.geometry.coordinates[1]\n                  ]}\n                  onClose={() => {\n                    this.setState({activePark:null});\n                  }}\n                >\n                  <div>\n                    <h2>{this.state.activePark.properties.NAME}</h2>\n                    <p>{this.state.activePark.properties.DESCRIPTION}</p>\n                  </div>\n                </Popup>\n              )}\n            </Map>\n          </div>\n        </div>\n      </Layout>\n    );\n  };\n}\n\nexport default MapLayout;\n","import React from 'react';\nimport { Link } from \"gatsby\";\nimport MapLayout from \"../components/MapLayout\";\n\nconst MapPage = () => {\n  return (\n    <MapLayout>\n      <div className=\"overlay\"> <p></p><p></p><p></p><p></p><p></p><a>link</a></div>\n{/*\n      <WindowFrame styles={{left: \"10rem\", top: \"10rem\", width:\"20rem\"}}\n        className={windowFrame.problem}>\n        <header>Homemaker Oxford</header>\n        <p>\n          Ninety-nine percent of humanity does not know that we have the option \n          to “make it” economically on this planet and in the Universe. We do. It can \n          only be accomplished, however, through a design science initiative and tech- \n          nological revolution.\n        </p>\n        <footer><Link className={windowFrame.button} to=\"/info\">READ MORE</Link> x y z</footer>\n      </WindowFrame>\n\n\n      <WindowFrame styles={{left: \"32rem\", top: \"10rem\", width:\"15rem\"}}\n        className={windowFrame.solution}>\n        <header>Small window</header>\n        <p>\n          The integrity of the individual’s enthusiasm for the now-possible success \n          of all humanity is critical to successful exercise of our option.\n        </p>\n        <p><Link className={windowFrame.button} to=\"/\">READ MORE</Link></p>\n      </WindowFrame>*/}\n    </MapLayout>\n  );\n}\n\nexport default MapPage;\n","/*!\n  Copyright (c) 2017 Jed Watson.\n  Licensed under the MIT License (MIT), see\n  http://jedwatson.github.io/classnames\n*/\n\n/* global define */\n(function () {\n  'use strict';\n\n  var hasOwn = {}.hasOwnProperty;\n\n  function classNames() {\n    var classes = [];\n\n    for (var i = 0; i < arguments.length; i++) {\n      var arg = arguments[i];\n      if (!arg) continue;\n      var argType = typeof arg;\n\n      if (argType === 'string' || argType === 'number') {\n        classes.push(arg);\n      } else if (Array.isArray(arg) && arg.length) {\n        var inner = classNames.apply(null, arg);\n\n        if (inner) {\n          classes.push(inner);\n        }\n      } else if (argType === 'object') {\n        for (var key in arg) {\n          if (hasOwn.call(arg, key) && arg[key]) {\n            classes.push(key);\n          }\n        }\n      }\n    }\n\n    return classes.join(' ');\n  }\n\n  if (typeof module !== 'undefined' && module.exports) {\n    classNames.default = classNames;\n    module.exports = classNames;\n  } else if (typeof define === 'function' && typeof define.amd === 'object' && define.amd) {\n    // register as 'classnames', consistent with npm package name\n    define('classnames', [], function () {\n      return classNames;\n    });\n  } else {\n    window.classNames = classNames;\n  }\n})();","// extracted by mini-css-extract-plugin\nmodule.exports = {\"map_layout\":\"mapLayout-module--map_layout--1uDaX\",\"overlay\":\"mapLayout-module--overlay--1lMrM\",\"map\":\"mapLayout-module--map--2Owqp\",\"map_disabled\":\"mapLayout-module--map_disabled--1kvJb\"};","module.exports = \"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAyOC44OSAzNC44OCI+PGRlZnM+PHN0eWxlPi5jbHMtMXtmaWxsOiMzYzAwY2U7fTwvc3R5bGU+PC9kZWZzPjx0aXRsZT5UZXh0IHBvaW50ZXIgYmx1ZUFzc2V0IDE0PC90aXRsZT48ZyBpZD0iTGF5ZXJfMiIgZGF0YS1uYW1lPSJMYXllciAyIj48ZyBpZD0iZnJvbnRfaW50ZXJmYWNlIiBkYXRhLW5hbWU9ImZyb250IGludGVyZmFjZSI+PHBhdGggY2xhc3M9ImNscy0xIiBkPSJNMjQuNjYsNC4yM0ExNC40NSwxNC40NSwwLDAsMCw0LjIzLDI0LjY2TDE0LjQ0LDM0Ljg4LDI0LjY2LDI0LjY2QTE0LjQ1LDE0LjQ1LDAsMCwwLDI0LjY2LDQuMjNabS0yLDZMMTEuNTUsMjEuNDNsLTEuMTYuMzItMy0zLC41My0xLjI3TDE4Ljc3LDYuNjJsMS4zLDAsMi42NiwyLjY2Wk05LjY1LDIxLjlsLTMuMTkuNzQuMjQtMS4xMi40OS0yLjA4WiIvPjwvZz48L2c+PC9zdmc+\""],"sourceRoot":""}